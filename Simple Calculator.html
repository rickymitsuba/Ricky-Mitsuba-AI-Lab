<!DOCTYPE html>
<html lang="en">
<head>

<!-- Standard browser favicons -->
<link rel="icon" type="image/png" href="favicon-32x32.png">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TBHH4Z8MW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4TBHH4Z8MW');
</script>




    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Here Is your Personal Calculator!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #1abc9c;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-color: #1a252f;
            --light-color: #ecf0f1;
            --text-color: #34495e;
            --border-radius: 12px;
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 50%, #1abc9c 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated background particles */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 30px 0 20px;
            color: white;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header h1 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        header p {
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            opacity: 0.95;
            font-weight: 300;
        }

        .app-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            animation: scaleIn 0.6s ease-out 0.2s both;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 1200px;
            margin: 0 auto;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .tabs {
            display: flex;
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.1), rgba(52, 152, 219, 0.1));
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            overflow-x: auto;
            padding: 5px;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-bounce);
            font-weight: 600;
            white-space: nowrap;
            position: relative;
            border-radius: 10px;
            margin: 0 2px;
            font-size: 0.9rem;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
            z-index: -1;
        }

        .tab:hover::before {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        .tab:hover {
            color: white;
            transform: translateY(-2px);
        }

        .tab.active {
            color: white;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(44, 62, 80, 0.3);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: 100%;
                opacity: 1;
            }
        }

        .tab-content {
            padding: 20px;
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .calculator-display {
            background: linear-gradient(135deg, #1a252f, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            text-align: right;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 700;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            word-break: break-all;
        }

        .calculator-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: sweep 4s ease-in-out infinite;
        }

        @keyframes sweep {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .calculator-history {
            background: rgba(236, 240, 241, 0.7);
            padding: 10px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            max-height: 80px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: var(--dark-color);
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .calc-btn {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            padding: 15px;
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-color);
            position: relative;
            overflow: hidden;
            min-height: 50px;
        }

        .calc-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .calc-btn:hover::before {
            width: 200px;
            height: 200px;
        }

        .calc-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--secondary-color);
        }

        .calc-btn:active {
            transform: translateY(-1px);
        }

        .calc-btn.operator {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
        }

        .calc-btn.equals {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
            color: white;
            border: none;
            grid-column: span 2;
        }

        .calc-btn.clear {
            background: linear-gradient(135deg, var(--danger-color), #c0392b);
            color: white;
            border: none;
        }

        .calc-btn.function {
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
            color: white;
            border: none;
        }

        .input-group {
            margin-bottom: 20px;
            animation: slideInLeft 0.6s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition-smooth);
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
            transform: translateY(-2px);
        }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23334155' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            padding-right: 40px;
            appearance: none;
            cursor: pointer;
        }

        .btn {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-bounce);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
            width: 100%;
            justify-content: center;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(52, 152, 219, 0.3);
        }

        .btn:active {
            transform: translateY(-1px) scale(1.02);
            transition: all 0.1s ease;
        }

        .result-card {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            animation: slideUp 0.5s ease-out;
            border: 1px solid rgba(226, 232, 240, 0.5);
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(52, 152, 219, 0.05), transparent);
            transform: rotate(45deg);
            animation: shimmerCard 3s ease-in-out infinite;
        }

        @keyframes shimmerCard {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            transition: var(--transition-smooth);
            position: relative;
        }

        .result-item:hover {
            padding-left: 10px;
            background: linear-gradient(90deg, rgba(52, 152, 219, 0.05), transparent);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
            color: var(--text-color);
        }

        .result-value {
            font-weight: 700;
            color: var(--secondary-color);
            font-size: 1.1rem;
            word-break: break-all;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--dark-color), #334155);
            color: white;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(100px) rotateX(90deg);
            opacity: 0;
            transition: var(--transition-bounce);
            z-index: 1000;
            font-weight: 600;
            max-width: 90%;
        }

        .toast.show {
            transform: translateY(0) rotateX(0);
            opacity: 1;
        }

        .conversion-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .conversion-input {
            flex: 1;
        }

        .equation-display {
            background: rgba(236, 240, 241, 0.7);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: var(--dark-color);
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
        }

        .equation-steps {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 15px;
        }

        .step {
            padding: 8px 0;
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-number {
            display: inline-block;
            width: 22px;
            height: 22px;
            background: var(--secondary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 22px;
            margin-right: 8px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 5px;
            }
            
            header {
                padding: 20px 0 15px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .calculator-buttons {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
            
            .calc-btn {
                padding: 12px;
                font-size: 0.9rem;
                min-height: 45px;
            }
            
            .conversion-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .toast {
                bottom: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .calculator-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .calc-btn.equals {
                grid-column: span 3;
            }
            
            .tab {
                font-size: 0.8rem;
                padding: 12px 8px;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-square-root-alt"></i> Ricky Mitsuba AI Lab</h1>
            <p>Advanced Scientific Calculator for Research and Study</p>
        </header>

        <div class="app-container">
            <div class="tabs">
                <div class="tab active" data-tab="basic">Basic</div>
                <div class="tab" data-tab="scientific">Scientific</div>
                <div class="tab" data-tab="converter">Unit Converter</div>
                <div class="tab" data-tab="equation">Equation Solver</div>
            </div>

            <!-- Basic Calculator -->
            <div class="tab-content active" id="basic">
                <div class="calculator-display" id="basic-display">0</div>
                <div class="calculator-history" id="basic-history"></div>
                <div class="calculator-buttons">
                    <button class="calc-btn clear" onclick="clearBasic()">C</button>
                    <button class="calc-btn function" onclick="deleteLastBasic()">←</button>
                    <button class="calc-btn function" onclick="appendOperatorBasic('/')">÷</button>
                    <button class="calc-btn function" onclick="appendOperatorBasic('*')">×</button>
                    
                    <button class="calc-btn" onclick="appendNumberBasic('7')">7</button>
                    <button class="calc-btn" onclick="appendNumberBasic('8')">8</button>
                    <button class="calc-btn" onclick="appendNumberBasic('9')">9</button>
                    <button class="calc-btn function" onclick="appendOperatorBasic('-')">−</button>
                    
                    <button class="calc-btn" onclick="appendNumberBasic('4')">4</button>
                    <button class="calc-btn" onclick="appendNumberBasic('5')">5</button>
                    <button class="calc-btn" onclick="appendNumberBasic('6')">6</button>
                    <button class="calc-btn function" onclick="appendOperatorBasic('+')">+</button>
                    
                    <button class="calc-btn" onclick="appendNumberBasic('1')">1</button>
                    <button class="calc-btn" onclick="appendNumberBasic('2')">2</button>
                    <button class="calc-btn" onclick="appendNumberBasic('3')">3</button>
                    <button class="calc-btn" onclick="appendNumberBasic('.')">.</button>
                    
                    <button class="calc-btn" onclick="appendNumberBasic('0')">0</button>
                    <button class="calc-btn" onclick="toggleSignBasic()">±</button>
                    <button class="calc-btn equals" onclick="calculateBasic()">=</button>
                </div>
            </div>

            <!-- Scientific Calculator -->
            <div class="tab-content" id="scientific">
                <div class="calculator-display" id="scientific-display">0</div>
                <div class="calculator-history" id="scientific-history"></div>
                <div class="calculator-buttons">
                    <button class="calc-btn clear" onclick="clearScientific()">C</button>
                    <button class="calc-btn function" onclick="deleteLastScientific()">←</button>
                    <button class="calc-btn function" onclick="appendFunctionScientific('sin')">sin</button>
                    <button class="calc-btn function" onclick="appendFunctionScientific('cos')">cos</button>
                    
                    <button class="calc-btn function" onclick="appendFunctionScientific('tan')">tan</button>
                    <button class="calc-btn function" onclick="appendFunctionScientific('log')">log</button>
                    <button class="calc-btn function" onclick="appendFunctionScientific('ln')">ln</button>
                    <button class="calc-btn function" onclick="appendOperatorScientific('/')">÷</button>
                    
                    <button class="calc-btn" onclick="appendNumberScientific('7')">7</button>
                    <button class="calc-btn" onclick="appendNumberScientific('8')">8</button>
                    <button class="calc-btn" onclick="appendNumberScientific('9')">9</button>
                    <button class="calc-btn function" onclick="appendOperatorScientific('*')">×</button>
                    
                    <button class="calc-btn" onclick="appendNumberScientific('4')">4</button>
                    <button class="calc-btn" onclick="appendNumberScientific('5')">5</button>
                    <button class="calc-btn" onclick="appendNumberScientific('6')">6</button>
                    <button class="calc-btn function" onclick="appendOperatorScientific('-')">−</button>
                    
                    <button class="calc-btn" onclick="appendNumberScientific('1')">1</button>
                    <button class="calc-btn" onclick="appendNumberScientific('2')">2</button>
                    <button class="calc-btn" onclick="appendNumberScientific('3')">3</button>
                    <button class="calc-btn function" onclick="appendOperatorScientific('+')">+</button>
                    
                    <button class="calc-btn" onclick="appendNumberScientific('0')">0</button>
                    <button class="calc-btn" onclick="appendNumberScientific('.')">.</button>
                    <button class="calc-btn function" onclick="appendFunctionScientific('sqrt')">√</button>
                    <button class="calc-btn equals" onclick="calculateScientific()">=</button>
                </div>
            </div>

            <!-- Unit Converter -->
            <div class="tab-content" id="converter">
                <div class="input-group">
                    <label for="conversion-type">Conversion Type</label>
                    <select id="conversion-type" onchange="updateConversionInputs()">
                        <option value="length">Length</option>
                        <option value="weight">Weight</option>
                        <option value="temperature">Temperature</option>
                        <option value="volume">Volume</option>
                        <option value="area">Area</option>
                        <option value="speed">Speed</option>
                        <option value="pressure">Pressure</option>
                        <option value="energy">Energy</option>
                    </select>
                </div>
                
                <div class="conversion-row">
                    <div class="conversion-input">
                        <label for="from-unit">From</label>
                        <select id="from-unit"></select>
                    </div>
                    <div class="conversion-input">
                        <label for="to-unit">To</label>
                        <select id="to-unit"></select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="conversion-value">Value</label>
                    <input type="number" id="conversion-value" placeholder="Enter value to convert" step="any">
                </div>
                
                <button class="btn" onclick="convertUnits()">
                    <i class="fas fa-exchange-alt"></i> Convert
                </button>
                
                <div id="conversion-result"></div>
            </div>

            <!-- Equation Solver -->
            <div class="tab-content" id="equation">
                <div class="input-group">
                    <label for="equation-type">Equation Type</label>
                    <select id="equation-type" onchange="updateEquationInputs()">
                        <option value="linear">Linear (ax + b = 0)</option>
                        <option value="quadratic">Quadratic (ax² + bx + c = 0)</option>
                        <option value="cubic">Cubic (ax³ + bx² + cx + d = 0)</option>
                        <option value="system">System of Linear Equations</option>
                    </select>
                </div>
                
                <div id="equation-inputs"></div>
                
                <button class="btn" onclick="solveEquation()">
                    <i class="fas fa-calculator"></i> Solve
                </button>
                
                <div id="equation-result"></div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Tab switching with animation
        document.querySelectorAll('.tab').forEach((tab, index) => {
            tab.style.animationDelay = `${index * 0.1}s`;
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                
                // Remove active class from all tabs and contents
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Helper function to validate operator sequence
        function isValidOperatorSequence(currentDisplay, newOperator) {
            const trimmed = currentDisplay.trim();
            const lastChar = trimmed[trimmed.length - 1];
            const operators = ['+', '-', '*', '/'];
            
            // If display is empty and operator is not minus, return false
            if (trimmed === '0' && newOperator !== '-') {
                return false;
            }
            
            // If last character is an operator, don't allow another operator
            if (operators.includes(lastChar)) {
                return false;
            }
            
            return true;
        }

        // Helper function to validate decimal point
        function isValidDecimal(currentDisplay) {
            const parts = currentDisplay.split(/[\+\-\*\/]/);
            const currentNumber = parts[parts.length - 1];
            return !currentNumber.includes('.');
        }

        // Basic Calculator Functions
        let basicDisplay = '0';
        let basicHistory = '';
        let basicNewNumber = true;

        function updateBasicDisplay() {
            document.getElementById('basic-display').textContent = basicDisplay;
        }

        function updateBasicHistory() {
            document.getElementById('basic-history').textContent = basicHistory;
        }

        function appendNumberBasic(num) {
            if (basicNewNumber && num !== '.') {
                basicDisplay = num;
                basicNewNumber = false;
            } else if (basicDisplay === '0' && num !== '.') {
                basicDisplay = num;
            } else if (num === '.' && !isValidDecimal(basicDisplay)) {
                showToast('Invalid decimal point');
                return;
            } else {
                basicDisplay += num;
            }
            updateBasicDisplay();
        }

        function appendOperatorBasic(op) {
            if (!isValidOperatorSequence(basicDisplay, op)) {
                showToast('Invalid operator sequence');
                return;
            }
            
            basicDisplay += ' ' + op + ' ';
            basicNewNumber = false;
            updateBasicDisplay();
        }

        function clearBasic() {
            basicDisplay = '0';
            basicHistory = '';
            basicNewNumber = true;
            updateBasicDisplay();
            updateBasicHistory();
        }

        function deleteLastBasic() {
            if (basicDisplay.length > 1) {
                basicDisplay = basicDisplay.slice(0, -1);
                if (basicDisplay.trim() === '') {
                    basicDisplay = '0';
                }
            } else {
                basicDisplay = '0';
            }
            updateBasicDisplay();
        }

        function toggleSignBasic() {
            const parts = basicDisplay.split(/[\+\-\*\/]/);
            const currentNumber = parts[parts.length - 1];
            
            if (currentNumber !== '0') {
                if (currentNumber.startsWith('-')) {
                    basicDisplay = basicDisplay.replace('-' + currentNumber, currentNumber.substring(1));
                } else {
                    basicDisplay = basicDisplay.replace(currentNumber, '-' + currentNumber);
                }
                updateBasicDisplay();
            }
        }

        function calculateBasic() {
            try {
                // Replace display symbols with actual operators
                let expression = basicDisplay.replace(/×/g, '*').replace(/÷/g, '/').replace(/−/g, '-');
                
                // Calculate result
                let result = eval(expression);
                
                // Handle division by zero
                if (!isFinite(result)) {
                    showToast('Cannot divide by zero');
                    return;
                }
                
                // Update history
                basicHistory = basicDisplay + ' = ' + result;
                updateBasicHistory();
                
                // Update display
                basicDisplay = result.toString();
                basicNewNumber = true;
                updateBasicDisplay();
            } catch (error) {
                showToast('Invalid expression');
            }
        }

        // Scientific Calculator Functions
        let scientificDisplay = '0';
        let scientificHistory = '';
        let scientificNewNumber = true;

        function updateScientificDisplay() {
            document.getElementById('scientific-display').textContent = scientificDisplay;
        }

        function updateScientificHistory() {
            document.getElementById('scientific-history').textContent = scientificHistory;
        }

        function appendNumberScientific(num) {
            if (scientificNewNumber && num !== '.') {
                scientificDisplay = num;
                scientificNewNumber = false;
            } else if (scientificDisplay === '0' && num !== '.') {
                scientificDisplay = num;
            } else if (num === '.' && !isValidDecimal(scientificDisplay)) {
                showToast('Invalid decimal point');
                return;
            } else {
                scientificDisplay += num;
            }
            updateScientificDisplay();
        }

        function appendOperatorScientific(op) {
            if (!isValidOperatorSequence(scientificDisplay, op)) {
                showToast('Invalid operator sequence');
                return;
            }
            
            scientificDisplay += ' ' + op + ' ';
            scientificNewNumber = false;
            updateScientificDisplay();
        }

        function appendFunctionScientific(func) {
            if (func === 'sqrt') {
                if (scientificDisplay !== '0' && !scientificNewNumber) {
                    scientificDisplay = 'Math.sqrt(' + scientificDisplay + ')';
                } else {
                    scientificDisplay = 'Math.sqrt(';
                }
            } else if (func === 'sin') {
                scientificDisplay = 'Math.sin(' + scientificDisplay + ')';
            } else if (func === 'cos') {
                scientificDisplay = 'Math.cos(' + scientificDisplay + ')';
            } else if (func === 'tan') {
                scientificDisplay = 'Math.tan(' + scientificDisplay + ')';
            } else if (func === 'log') {
                scientificDisplay = 'Math.log10(' + scientificDisplay + ')';
            } else if (func === 'ln') {
                scientificDisplay = 'Math.log(' + scientificDisplay + ')';
            }
            scientificNewNumber = true;
            updateScientificDisplay();
        }

        function clearScientific() {
            scientificDisplay = '0';
            scientificHistory = '';
            scientificNewNumber = true;
            updateScientificDisplay();
            updateScientificHistory();
        }

        function deleteLastScientific() {
            if (scientificDisplay.length > 1) {
                scientificDisplay = scientificDisplay.slice(0, -1);
                if (scientificDisplay.trim() === '') {
                    scientificDisplay = '0';
                }
            } else {
                scientificDisplay = '0';
            }
            updateScientificDisplay();
        }

        function calculateScientific() {
            try {
                // Replace display symbols with actual operators
                let expression = scientificDisplay.replace(/×/g, '*').replace(/÷/g, '/').replace(/−/g, '-');
                
                // Calculate result
                let result = eval(expression);
                
                // Handle errors
                if (!isFinite(result)) {
                    showToast('Math error');
                    return;
                }
                
                // Update history
                scientificHistory = scientificDisplay + ' = ' + result;
                updateScientificHistory();
                
                // Update display
                scientificDisplay = result.toString();
                scientificNewNumber = true;
                updateScientificDisplay();
            } catch (error) {
                showToast('Invalid expression');
            }
        }

        // Keyboard support
        document.addEventListener('keydown', function(event) {
            const activeTab = document.querySelector('.tab.active').dataset.tab;
            
            if (activeTab === 'basic') {
                handleBasicKeyboard(event);
            } else if (activeTab === 'scientific') {
                handleScientificKeyboard(event);
            }
        });

        function handleBasicKeyboard(event) {
            const key = event.key;
            
            if (key >= '0' && key <= '9') {
                appendNumberBasic(key);
            } else if (key === '.') {
                appendNumberBasic('.');
            } else if (key === '+') {
                appendOperatorBasic('+');
            } else if (key === '-') {
                appendOperatorBasic('-');
            } else if (key === '*') {
                appendOperatorBasic('*');
            } else if (key === '/') {
                event.preventDefault();
                appendOperatorBasic('/');
            } else if (key === 'Enter' || key === '=') {
                calculateBasic();
            } else if (key === 'Escape') {
                clearBasic();
            } else if (key === 'Backspace') {
                deleteLastBasic();
            }
        }

        function handleScientificKeyboard(event) {
            const key = event.key;
            
            if (key >= '0' && key <= '9') {
                appendNumberScientific(key);
            } else if (key === '.') {
                appendNumberScientific('.');
            } else if (key === '+') {
                appendOperatorScientific('+');
            } else if (key === '-') {
                appendOperatorScientific('-');
            } else if (key === '*') {
                appendOperatorScientific('*');
            } else if (key === '/') {
                event.preventDefault();
                appendOperatorScientific('/');
            } else if (key === 'Enter' || key === '=') {
                calculateScientific();
            } else if (key === 'Escape') {
                clearScientific();
            } else if (key === 'Backspace') {
                deleteLastScientific();
            }
        }

        // Unit Converter Functions
        const conversionFactors = {
            length: {
                meter: 1,
                kilometer: 0.001,
                centimeter: 100,
                millimeter: 1000,
                mile: 0.000621371,
                yard: 1.09361,
                foot: 3.28084,
                inch: 39.3701
            },
            weight: {
                kilogram: 1,
                gram: 1000,
                milligram: 1000000,
                pound: 2.20462,
                ounce: 35.274,
                ton: 0.001,
                stone: 0.157473
            },
            temperature: {
                celsius: 'celsius',
                fahrenheit: 'fahrenheit',
                kelvin: 'kelvin',
                rankine: 'rankine'
            },
            volume: {
                liter: 1,
                milliliter: 1000,
                gallon: 0.264172,
                quart: 1.05669,
                pint: 2.11338,
                cup: 4.22675,
                fluid_ounce: 33.814,
                cubic_meter: 0.001
            },
            area: {
                square_meter: 1,
                square_kilometer: 0.000001,
                square_centimeter: 10000,
                square_millimeter: 1000000,
                hectare: 0.0001,
                acre: 0.000247105,
                square_foot: 10.7639,
                square_inch: 1550
            },
            speed: {
                meter_per_second: 1,
                kilometer_per_hour: 3.6,
                mile_per_hour: 2.23694,
                foot_per_second: 3.28084,
                knot: 1.94384,
                mach: 0.00291545
            },
            pressure: {
                pascal: 1,
                kilopascal: 0.001,
                bar: 0.00001,
                psi: 0.000145038,
                atmosphere: 0.00000986923,
                torr: 0.00750062,
                mmhg: 0.00750062
            },
            energy: {
                joule: 1,
                kilojoule: 0.001,
                calorie: 0.239006,
                kilocalorie: 0.000239006,
                watt_hour: 0.000277778,
                kilowatt_hour: 0.000000277778,
                btu: 0.000947817
            }
        };

        function updateConversionInputs() {
            const conversionType = document.getElementById('conversion-type').value;
            const fromUnit = document.getElementById('from-unit');
            const toUnit = document.getElementById('to-unit');
            
            // Clear existing options
            fromUnit.innerHTML = '';
            toUnit.innerHTML = '';
            
            // Add new options based on conversion type
            const units = conversionFactors[conversionType];
            for (const unit in units) {
                const option1 = document.createElement('option');
                option1.value = unit;
                option1.textContent = unit.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                fromUnit.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = unit;
                option2.textContent = unit.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                toUnit.appendChild(option2);
            }
            
            // Set default selections
            if (fromUnit.options.length > 1) {
                toUnit.selectedIndex = 1;
            }
        }

        function convertUnits() {
            const conversionType = document.getElementById('conversion-type').value;
            const fromUnit = document.getElementById('from-unit').value;
            const toUnit = document.getElementById('to-unit').value;
            const value = parseFloat(document.getElementById('conversion-value').value);
            
            if (isNaN(value)) {
                showToast('Please enter a valid number');
                return;
            }
            
            let result;
            
            if (conversionType === 'temperature') {
                // Special handling for temperature conversions
                if (fromUnit === 'celsius') {
                    if (toUnit === 'fahrenheit') result = (value * 9/5) + 32;
                    else if (toUnit === 'kelvin') result = value + 273.15;
                    else if (toUnit === 'rankine') result = (value + 273.15) * 9/5;
                    else result = value;
                } else if (fromUnit === 'fahrenheit') {
                    if (toUnit === 'celsius') result = (value - 32) * 5/9;
                    else if (toUnit === 'kelvin') result = (value - 32) * 5/9 + 273.15;
                    else if (toUnit === 'rankine') result = value + 459.67;
                    else result = value;
                } else if (fromUnit === 'kelvin') {
                    if (toUnit === 'celsius') result = value - 273.15;
                    else if (toUnit === 'fahrenheit') result = (value - 273.15) * 9/5 + 32;
                    else if (toUnit === 'rankine') result = value * 9/5;
                    else result = value;
                } else if (fromUnit === 'rankine') {
                    if (toUnit === 'celsius') result = (value * 5/9) - 273.15;
                    else if (toUnit === 'fahrenheit') result = value - 459.67;
                    else if (toUnit === 'kelvin') result = value * 5/9;
                    else result = value;
                }
            } else {
                // Standard unit conversion
                const factorFrom = conversionFactors[conversionType][fromUnit];
                const factorTo = conversionFactors[conversionType][toUnit];
                
                // Convert to base unit, then to target unit
                const baseValue = value / factorFrom;
                result = baseValue * factorTo;
            }
            
            // Display result
            const formattedResult = parseFloat(result.toFixed(10)).toString();
            
            let html = `
                <div class="result-card">
                    <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Conversion Result</h3>
                    <div class="result-item">
                        <span class="result-label">From</span>
                        <span class="result-value">${value} ${fromUnit.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">To</span>
                        <span class="result-value">${formattedResult} ${toUnit.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                    </div>
                </div>
            `;
            
            document.getElementById('conversion-result').innerHTML = html;
        }

        // Equation Solver Functions
        function updateEquationInputs() {
            const equationType = document.getElementById('equation-type').value;
            const equationInputs = document.getElementById('equation-inputs');
            
            equationInputs.innerHTML = '';
            
            if (equationType === 'linear') {
                equationInputs.innerHTML = `
                    <div class="input-group">
                        <label for="linear-a">Coefficient a</label>
                        <input type="number" id="linear-a" placeholder="Enter coefficient a" step="any">
                    </div>
                    <div class="input-group">
                        <label for="linear-b">Coefficient b</label>
                        <input type="number" id="linear-b" placeholder="Enter coefficient b" step="any">
                    </div>
                    <div class="equation-display">
                        ax + b = 0
                    </div>
                `;
            } else if (equationType === 'quadratic') {
                equationInputs.innerHTML = `
                    <div class="input-group">
                        <label for="quadratic-a">Coefficient a</label>
                        <input type="number" id="quadratic-a" placeholder="Enter coefficient a" step="any">
                    </div>
                    <div class="input-group">
                        <label for="quadratic-b">Coefficient b</label>
                        <input type="number" id="quadratic-b" placeholder="Enter coefficient b" step="any">
                    </div>
                    <div class="input-group">
                        <label for="quadratic-c">Coefficient c</label>
                        <input type="number" id="quadratic-c" placeholder="Enter coefficient c" step="any">
                    </div>
                    <div class="equation-display">
                        ax² + bx + c = 0
                    </div>
                `;
            } else if (equationType === 'cubic') {
                equationInputs.innerHTML = `
                    <div class="input-group">
                        <label for="cubic-a">Coefficient a</label>
                        <input type="number" id="cubic-a" placeholder="Enter coefficient a" step="any">
                    </div>
                    <div class="input-group">
                        <label for="cubic-b">Coefficient b</label>
                        <input type="number" id="cubic-b" placeholder="Enter coefficient b" step="any">
                    </div>
                    <div class="input-group">
                        <label for="cubic-c">Coefficient c</label>
                        <input type="number" id="cubic-c" placeholder="Enter coefficient c" step="any">
                    </div>
                    <div class="input-group">
                        <label for="cubic-d">Coefficient d</label>
                        <input type="number" id="cubic-d" placeholder="Enter coefficient d" step="any">
                    </div>
                    <div class="equation-display">
                        ax³ + bx² + cx + d = 0
                    </div>
                `;
            } else if (equationType === 'system') {
                equationInputs.innerHTML = `
                    <div class="input-group">
                        <label for="system-a1">Equation 1: Coefficient a₁</label>
                        <input type="number" id="system-a1" placeholder="Enter coefficient a₁" step="any">
                    </div>
                    <div class="input-group">
                        <label for="system-b1">Equation 1: Coefficient b₁</label>
                        <input type="number" id="system-b1" placeholder="Enter coefficient b₁" step="any">
                    </div>
                    <div class="input-group">
                        <label for="system-c1">Equation 1: Constant c₁</label>
                        <input type="number" id="system-c1" placeholder="Enter constant c₁" step="any">
                    </div>
                    <div class="input-group">
                        <label for="system-a2">Equation 2: Coefficient a₂</label>
                        <input type="number" id="system-a2" placeholder="Enter coefficient a₂" step="any">
                    </div>
                    <div class="input-group">
                        <label for="system-b2">Equation 2: Coefficient b₂</label>
                        <input type="number" id="system-b2" placeholder="Enter coefficient b₂" step="any">
                    </div>
                    <div class="input-group">
                        <label for="system-c2">Equation 2: Constant c₂</label>
                        <input type="number" id="system-c2" placeholder="Enter constant c₂" step="any">
                    </div>
                    <div class="equation-display">
                        a₁x + b₁y = c₁<br>
                        a₂x + b₂y = c₂
                    </div>
                `;
            }
        }

        function solveEquation() {
            const equationType = document.getElementById('equation-type').value;
            let result = '';
            
            if (equationType === 'linear') {
                const a = parseFloat(document.getElementById('linear-a').value);
                const b = parseFloat(document.getElementById('linear-b').value);
                
                if (isNaN(a) || isNaN(b)) {
                    showToast('Please enter valid coefficients');
                    return;
                }
                
                let x;
                if (a === 0) {
                    if (b === 0) {
                        result = 'Infinite solutions (0 = 0)';
                    } else {
                        result = 'No solution (contradiction)';
                    }
                } else {
                    x = -b / a;
                    result = `x = ${x.toFixed(6)}`;
                }
                
                result = `
                    <div class="result-card">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Solution</h3>
                        <div class="equation-steps">
                            <div class="step">
                                <span class="step-number">1</span>
                                Equation: ${a}x + ${b} = 0
                            </div>
                            <div class="step">
                                <span class="step-number">2</span>
                                ${a}x = ${-b}
                            </div>
                            <div class="step">
                                <span class="step-number">3</span>
                                x = ${-b}/${a}
                            </div>
                            <div class="step">
                                <span class="step-number">4</span>
                                x = ${x ? x.toFixed(6) : 'undefined'}
                            </div>
                        </div>
                        <div class="result-item" style="margin-top: 20px;">
                            <span class="result-label">Result</span>
                            <span class="result-value">${result}</span>
                        </div>
                    </div>
                `;
            } else if (equationType === 'quadratic') {
                const a = parseFloat(document.getElementById('quadratic-a').value);
                const b = parseFloat(document.getElementById('quadratic-b').value);
                const c = parseFloat(document.getElementById('quadratic-c').value);
                
                if (isNaN(a) || isNaN(b) || isNaN(c)) {
                    showToast('Please enter valid coefficients');
                    return;
                }
                
                let roots = [];
                
                if (a === 0) {
                    // It's actually a linear equation
                    if (b === 0) {
                        if (c === 0) {
                            result = 'Infinite solutions (0 = 0)';
                        } else {
                            result = 'No solution (contradiction)';
                        }
                    } else {
                        const x = -c / b;
                        result = `x = ${x.toFixed(6)}`;
                    }
                } else {
                    const discriminant = b * b - 4 * a * c;
                    
                    if (discriminant > 0) {
                        const x1 = (-b + Math.sqrt(discriminant)) / (2 * a);
                        const x2 = (-b - Math.sqrt(discriminant)) / (2 * a);
                        roots.push(x1.toFixed(6));
                        roots.push(x2.toFixed(6));
                        result = `x₁ = ${roots[0]}, x₂ = ${roots[1]}`;
                    } else if (Math.abs(discriminant) < 1e-10) {
                        const x = -b / (2 * a);
                        roots.push(x.toFixed(6));
                        result = `x = ${roots[0]} (double root)`;
                    } else {
                        const realPart = (-b / (2 * a)).toFixed(6);
                        const imaginaryPart = (Math.sqrt(-discriminant) / (2 * a)).toFixed(6);
                        roots.push(`${realPart} + ${imaginaryPart}i`);
                        roots.push(`${realPart} - ${imaginaryPart}i`);
                        result = `x₁ = ${roots[0]}, x₂ = ${roots[1]}`;
                    }
                }
                
                result = `
                    <div class="result-card">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Solution</h3>
                        <div class="equation-steps">
                            <div class="step">
                                <span class="step-number">1</span>
                                Equation: ${a}x² + ${b}x + ${c} = 0
                            </div>
                            <div class="step">
                                <span class="step-number">2</span>
                                Discriminant: Δ = b² - 4ac = ${(b*b).toFixed(2)} - 4×${a}×${c} = ${(b*b - 4*a*c).toFixed(2)}
                            </div>
                            <div class="step">
                                <span class="step-number">3</span>
                                ${(b*b - 4*a*c) > 0 ? 'Two real roots' : (Math.abs(b*b - 4*a*c) < 1e-10 ? 'One real root (double)' : 'Two complex roots')}
                            </div>
                            <div class="step">
                                <span class="step-number">4</span>
                                x = (-b ± √Δ) / 2a
                            </div>
                        </div>
                        <div class="result-item" style="margin-top: 20px;">
                            <span class="result-label">Result</span>
                            <span class="result-value">${result}</span>
                        </div>
                    </div>
                `;
            } else if (equationType === 'cubic') {
                const a = parseFloat(document.getElementById('cubic-a').value);
                const b = parseFloat(document.getElementById('cubic-b').value);
                const c = parseFloat(document.getElementById('cubic-c').value);
                const d = parseFloat(document.getElementById('cubic-d').value);
                
                if (isNaN(a) || isNaN(b) || isNaN(c) || isNaN(d)) {
                    showToast('Please enter valid coefficients');
                    return;
                }
                
                // Normalize coefficients
                const A = b / a;
                const B = c / a;
                const C = d / a;
                
                // Calculate depressed cubic coefficients
                const p = B - (A * A) / 3;
                const q = (2 * A * A * A) / 27 - (A * B) / 3 + C;
                
                const discriminant = (q / 2) * (q / 2) + (p / 3) * (p / 3) * (p / 3);
                
                let roots = [];
                
                if (Math.abs(discriminant) < 1e-10) {
                    // Three real roots, at least two equal
                    const u = Math.cbrt(-q / 2);
                    roots.push((2 * u - A / 3).toFixed(6));
                    roots.push((-u - A / 3).toFixed(6));
                    roots.push((-u - A / 3).toFixed(6));
                } else if (discriminant > 0) {
                    // One real root and two complex roots
                    const u = Math.cbrt(-q / 2 + Math.sqrt(discriminant));
                    const v = Math.cbrt(-q / 2 - Math.sqrt(discriminant));
                    roots.push((u + v - A / 3).toFixed(6));
                    
                    const realPart = (-(u + v) / 2 - A / 3).toFixed(6);
                    const imaginaryPart = (Math.sqrt(3) * (u - v) / 2).toFixed(6);
                    roots.push(`${realPart} + ${imaginaryPart}i`);
                    roots.push(`${realPart} - ${imaginaryPart}i`);
                } else {
                    // Three distinct real roots
                    const r = Math.sqrt(-Math.pow(p, 3) / 27);
                    const phi = Math.acos(-q / (2 * r));
                    const t = 2 * Math.cbrt(r);
                    
                    roots.push((t * Math.cos(phi / 3) - A / 3).toFixed(6));
                    roots.push((t * Math.cos((phi + 2 * Math.PI) / 3) - A / 3).toFixed(6));
                    roots.push((t * Math.cos((phi + 4 * Math.PI) / 3) - A / 3).toFixed(6));
                }
                
                result = `
                    <div class="result-card">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Solution</h3>
                        <div class="equation-steps">
                            <div class="step">
                                <span class="step-number">1</span>
                                Equation: ${a}x³ + ${b}x² + ${c}x + ${d} = 0
                            </div>
                            <div class="step">
                                <span class="step-number">2</span>
                                Normalized: x³ + ${A.toFixed(2)}x² + ${B.toFixed(2)}x + ${C.toFixed(2)} = 0
                            </div>
                            <div class="step">
                                <span class="step-number">3</span>
                                Depressed cubic: x³ + px + q = 0
                            </div>
                            <div class="step">
                                <span class="step-number">4</span>
                                p = ${p.toFixed(2)}, q = ${q.toFixed(2)}
                            </div>
                            <div class="step">
                                <span class="step-number">5</span>
                                Discriminant: Δ = ${(q/2)*(q/2) + (p/3)*(p/3)*(p/3)} 
                            </div>
                        </div>
                        <div class="result-item" style="margin-top: 20px;">
                            <span class="result-label">Roots</span>
                            <span class="result-value">x₁ = ${roots[0]}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label"></span>
                            <span class="result-value">x₂ = ${roots[1]}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label"></span>
                            <span class="result-value">x₃ = ${roots[2]}</span>
                        </div>
                    </div>
                `;
            } else if (equationType === 'system') {
                const a1 = parseFloat(document.getElementById('system-a1').value);
                const b1 = parseFloat(document.getElementById('system-b1').value);
                const c1 = parseFloat(document.getElementById('system-c1').value);
                const a2 = parseFloat(document.getElementById('system-a2').value);
                const b2 = parseFloat(document.getElementById('system-b2').value);
                const c2 = parseFloat(document.getElementById('system-c2').value);
                
                if (isNaN(a1) || isNaN(b1) || isNaN(c1) || isNaN(a2) || isNaN(b2) || isNaN(c2)) {
                    showToast('Please enter valid coefficients');
                    return;
                }
                
                const determinant = a1 * b2 - a2 * b1;
                
                let x, y;
                
                if (Math.abs(determinant) < 1e-10) {
                    // Check if the system is consistent or inconsistent
                    if (Math.abs(a1 * c2 - a2 * c1) < 1e-10 && Math.abs(b1 * c2 - b2 * c1) < 1e-10) {
                        result = 'Infinite solutions (dependent equations)';
                    } else {
                        result = 'No solution (inconsistent equations)';
                    }
                } else {
                    x = (c1 * b2 - c2 * b1) / determinant;
                    y = (a1 * c2 - a2 * c1) / determinant;
                    result = `x = ${x.toFixed(6)}, y = ${y.toFixed(6)}`;
                }
                
                result = `
                    <div class="result-card">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Solution</h3>
                        <div class="equation-steps">
                            <div class="step">
                                <span class="step-number">1</span>
                                System of equations:
                                <br>${a1}x + ${b1}y = ${c1}
                                <br>${a2}x + ${b2}y = ${c2}
                            </div>
                            <div class="step">
                                <span class="step-number">2</span>
                                Determinant: D = a₁b₂ - a₂b₁ = ${(a1*b2 - a2*b1).toFixed(2)}
                            </div>
                            <div class="step">
                                <span class="step-number">3</span>
                                ${Math.abs(determinant) >= 1e-10 ? 'Unique solution exists' : 'Determinant is zero'}
                            </div>
                            ${Math.abs(determinant) >= 1e-10 ? `
                            <div class="step">
                                <span class="step-number">4</span>
                                x = (c₁b₂ - c₂b₁) / D = ${((c1*b2 - c2*b1)/determinant).toFixed(6)}
                            </div>
                            <div class="step">
                                <span class="step-number">5</span>
                                y = (a₁c₂ - a₂c₁) / D = ${((a1*c2 - a2*c1)/determinant).toFixed(6)}
                            </div>
                            ` : ''}
                        </div>
                        <div class="result-item" style="margin-top: 20px;">
                            <span class="result-label">Result</span>
                            <span class="result-value">${result}</span>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('equation-result').innerHTML = result;
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize the page
        updateConversionInputs();
        updateEquationInputs();
    </script>
</body>
</html>